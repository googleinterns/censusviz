<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Census Viz</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <script src="https://cdn.amcharts.com/lib/4/core.js"></script>
  <script src="https://cdn.amcharts.com/lib/4/maps.js"></script>
  <script src="https://cdn.amcharts.com/lib/4/themes/animated.js"></script>
  <script src="https://cdn.amcharts.com/lib/4/geodata/usaLow.js"></script>
  <script defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB5cba6r-suEYL-0E_nRQfXDtT4XW0WxbQ"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chroma-js/1.3.4/chroma.min.js"></script>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script src="state-info.js"></script>
  <script src="data-visualization.js"></script>
  <script src="query-control.js"></script>
  <link rel="stylesheet" href="style.css">
</head>

<body onload="registerServiceWorker(); createStateDropdownList();">
  <main>
    <div id="header">
      <h1>Census Viz 
        <div class="tooltip">
          <i class="material-icons" id="faq">help_outline</i>
          <p class="tooltiptext">To use CensusViz, start typing in any box. The
             dropdown list will show you the options that are available. You 
             can mix and match between the lists to get answers to many 
             different questions. 
            <br><br>
            The data you see comes from many different sources within the census.
            Depending on your question, we choose the census data with the most 
            information available. Most of our data comes from the annual 
            American Community Survey; coming soon, if you ask about a year ending 
            in 0, you'll get information from the larger Decennial Survey instead.
          </p>
        </div>
      </h1>
    </div>
    <div id="query">
      <form id="query-form" onsubmit="passQuery(); return false;">
        <p>
          How many
          <input type="list" list="person-type" name="person-type" id="person-type-list"
              autocomplete="off" required onkeyup="validateInput('person-type')"
              onfocus="storeValueAndEmpty('person-type')"
              onfocusout="replaceValueIfEmpty('person-type')"
              value="people" pattern="children|adults|people|men|women">
            <datalist id="person-type">
              <option data-value="under-18" value="children"></option>
              <option data-value="over-18" value="adults"></option>
              <option data-value="all-ages" value="people"></option>
              <option data-value="male" value="men"></option>
              <option data-value="female" value="women"></option>
            </datalist>
          </input>

          <input type="list" list="action" name="action" id="action-list"
              autocomplete="off" required onkeyup="validateInput('action')"
              onfocus="storeValueAndEmpty('action')"
              onfocusout="replaceValueIfEmpty('action')"
              value="lived in" pattern="lived in|worked in|moved to" >
            <datalist id="action">
              <option data-value="live" value="lived in"></option>
              <option data-value="work" value="worked in"></option>
              <option data-value="moved" value="moved to"></option>
            </datalist>
          </input>

          <input type="list" list="location" name="location" id="location-list"
              autocomplete="off" required onkeyup="validateInput('location')"
              onfocus="storeValueAndEmpty('location')"
              onfocusout="replaceValueIfEmpty('location')"
              value="each U.S. state">
            <datalist id="location"></datalist>
          </input>
          in
          <input type="list" list="year" name="year" id="year-list"
              autocomplete="off" required onkeyup="validateInput('year')"
              onfocus="storeValueAndEmpty('year')"
              onfocusout="replaceValueIfEmpty('year')"
              value="2018" pattern="201[0-8]">
            <datalist id="year">
              <option value="2010"></option>
              <option value="2011"></option>
              <option value="2012"></option>
              <option value="2013"></option>
              <option value="2014"></option>
              <option value="2015"></option>
              <option value="2016"></option>
              <option value="2017"></option>
              <option value="2018"></option>
            </datalist>
          </input>
          ?
        </p>
        <input type="submit" value="go">
      </form>
    </div>
    <div id="result">
      <div id="map-options">
        <div class="map-option">
          <label class="switch" id="map-toggle-switch">
            <input type="checkbox" id="map-toggle" onchange="toggleMap()">
            <span class="slider round"></span>
          </label>
        </div>
        <div class="map-option" id="map-toggle-msg">Enable map overlay</div>
      </div>
      <div id="map-title"></div>
      <div id="more-info"></div>
      <div id="colors">
        <label for="set-color">Change the color of the visualization</label>
        <input type="color" id="set-color" name="set-color" onchange="changeColor(this)">
      </div>
      <div id="am-charts"></div>
      <div id="map"></div>
      <button id="toggle-data-btn" onclick="toggleDataTable()">Display raw data</button>
      <a id="census-link" target="_blank" rel="noopener">Explore more data from the Census API</a>
      <br>
      <div id="data-table"></div>
    </div>
    <footer>
      Made by Kyra Acquah, Shuli Jones, and Olivia Tobin.
    </footer>
  </main>
</body>
</html>
